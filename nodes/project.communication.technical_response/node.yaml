schema_version: "1.0"
node_id: "project.support.response_refinement"
name: "IT/OT Response Refinement"
version: "1.0.0"
lifecycle_phase: "READY"
domain_focus:
  - "Technical communication refinement"
  - "Validation markers"
  - "Escalation criteria"

inputs:
  incident_context: {type: object, required: true, description: "Structured incident facts and metrics"}
  audience_profile: {type: object, required: true, description: "Stakeholders, roles, and sensitivities"}
  channel: {type: string, enum: ["email","teams","ticket","status_report"], required: true}

outputs:
  email_draft: {type: string}
  teams_message: {type: string}
  ticket_update: {type: object}
  status_report: {type: string}
  validation_status: {type: object}

artifacts:
  knowledge_base: "./knowledge_base.yaml"
  constraints: "./constraints.yaml"
  supplement_prompt: "./supplement_prompt.md"

runbook_hooks:
  preflight_checks:
    - "enforce_constraints"
    - "classify_audience"
    - "select_template_by_channel"
  post_generate_checks:
    - "red_team_for_risk_language"
    - "mask_sensitive_data"
    - "append_validation_markers"

constraints_anchor:
  governance_received: "claude_handoff"
  modification_authority: "create_only"

routing:
  channel_to_template:
    email: "templates/email.md"
    teams: "templates/teams.md"
    ticket: "templates/ticket.yaml"
    status_report: "templates/status.md"
